name: node-firefox-headless
version: 0.2.1
inherits: hijonathan/node-firefox@0.1.0
type: main
platform: ubuntu@12.04
description: wercker box for running headles test on node
keywords:
  - firefox
  - opensource
  - headless
script: |
  sudo apt-get update -y
  sudo apt-get install xvfb x11-xkb-utils xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic x11-apps -y
  touch tmp.sh
  echo '#!/bin/bash' >> tmp.sh
  echo '  if [ -z "$1" ]; then' >> tmp.sh
  echo '    echo "`basename $0` {start|stop}"' >> tmp.sh
  echo '    exit' >> tmp.sh
  echo '  fi' >> tmp.sh
  echo '   case "$1" in' >> tmp.sh
  echo '  start)' >> tmp.sh
  echo '    /usr/bin/Xvfb :99 -ac -screen 0 1024x768x8 &' >> tmp.sh
  echo '  ;;' >> tmp.sh
  echo '  stop)' >> tmp.sh
  echo '    killall Xvfb' >> tmp.sh
  echo '  ;;' >> tmp.sh
  echo '  esac' >> tmp.sh
  sudo chmod +x tmp.sh
  sudo mv tmp.sh /etc/init.d/xfvb
